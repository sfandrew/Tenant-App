<script type="text/javascript">

var TENANT_APP = {};
// buildings API
var buildings = <%= @building_apartments.html_safe %>
// apartment fieldset
var $apartment_fieldset = $('fieldset').eq(1);
// building and apartment row 
var $apartment_row = $apartment_fieldset.children("div:first");
// building drowdown
var $building_dropdown = $apartment_row.children().children("div:first").children("select");
// apartment dropdown
var $apartment_dropdown = $apartment_row.children().children("div:last").children("select");


TENANT_APP.initialDropdown = function(){
	// empty building and apartment dropdown values
	$building_dropdown.empty();
	$apartment_dropdown.empty();
}

TENANT_APP.buildingList = function(){

	$.each(buildings["buildings"], function(key,value){
		$building_dropdown.append($("<option></option>").attr("value",value["id"]).text(value["name"]));
	});
}

TENANT_APP.apartments = function(){
	var building_id = $building_dropdown.val();
	$.each(buildings["buildings"],function(key,value){
		if(value.id == building_id.toString()){
			console.log(building_id);
			$.each(value.building_apartments,function(key,size){
				$apartment_dropdown.append($("<option></option>").attr("value",size["name"]).text(size["name"]));
			});
		
		}
		
	});
}

TENANT_APP.initialDropdown();
TENANT_APP.buildingList();
$building_dropdown.change(TENANT_APP.apartments);
TENANT_APP.apartments();





// var test = <%= @building_apartments.html_safe %>;


// console.log(test);


</script>