<h1 id="main-header">
  <% if @dynamic_form_type %>
    <%= pluralize(@dynamic_form_entries.size, @dynamic_form_type.name) %>
  <% else %>
    <%= pluralize(@dynamic_form_entries.size, 'Entry') %>
  <% end %>
</h1>

<fieldset>
  <%= form_for(:search, :url => dynamic_form_entries_path, :html => { :method => :get }) do  %>
    <div class="row">
      <div class="col-xs-6 col-sm-3">
        <select name="search[name]" class="form-control">
          <%=raw "<option value=\"\">[ALL]</option>" %>
          <%= options_for_select(@entries_name) %>
        </select>
      </div>
      <div class="col-xs-3 col-sm-2">
        <%=raw text_field 'search', 'properties', :class => "col-xs-6 form-control", :placeholder => "Enter properties like" %>
      </div>
      <div class="col-md-3">
        <div class="input-daterange input-group date">
          <%= text_field 'search', 'start', :class => "input-sm form-control", :placeholder => "Start Date" %>
          <span class="input-group-addon">to</span>
           <%= text_field 'search', 'end', :class => "input-sm form-control", :placeholder => "End Date" %>
        </div>
      </div>
      <%= link_to "Reset Query", dynamic_form_entries_path, :class => 'btn btn-danger col-sm-1' %>
      <div class="col-xs-6 col-sm-3">
        <button type="submit" class="btn btn-info btn-block"><i class="fa fa-search"></i> Search</button>
      </div>
    </div>
  <% end %>
</fieldset>



<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>Type</th>
      <th>Properties</th>
      <th>Submitted</th>
      <th></th>
      <th></th>
    </tr>
  </thead>



  <tbody>
    <% if @dynamic_form_entries %>
      <% @dynamic_form_entries.each do |dynamic_form_entry| %>
        <tr>
          <td><%= dynamic_form_entry.dynamic_form_type.name %></td>
          <td class="form-properties">
            <% if !dynamic_form_entry.properties.empty? %>
              <% dynamic_form_entry.properties.first(5).each do  |key,value| %>
                <li><%= value[:type] %> field</li>
              <% end %>
            <% else %>
              No Properties
            <% end %>
          </td>
          <td><%= dynamic_form_entry.created_at.strftime(" %l:%M %p %b. %d, %Y") %></td>
          <td><%= link_to 'Show', dynamic_form_entry, :class => 'btn btn-info' %></td>
          <!-- td><%= link_to 'Edit', edit_dynamic_form_entry_path(dynamic_form_entry) %></td -->
          <td><%= link_to 'Delete', dynamic_form_entry, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-danger' %></td>
        </tr>
      <% end %>
    <% else %>
      <tr>
        <td>You have no entries!</td>
      </tr>
    <% end %>
  </tbody>
</table>

<script type="text/javascript">
  $(document).ready(function(){
    $('.date input').datepicker({
    });
  });
</script>


